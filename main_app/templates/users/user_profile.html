{% extends 'base.html' %}

{% block title %}
<title>{{ user.username }}'s Profile</title>
{% endblock %}

{% block content %}
<main id="mainBase">
    <div class="card" id="postCard">
        <div class="card-content"> 
        <h3>Edit {{ user.username }} profile</h3>

        <!-- display avatar -->
        {% if user.userprofile.avatar %}
        <img src="{{ user.userprofile.avatar }}" class="rounded" id="avatar_file">
        {% if request.user.is_authenticated and request.user == user%}
        <form method="POST" action="{% url 'delete_avatar' user.id %}">
            {% csrf_token %}
            <button type="submit" class="img_delete_btn">X</button>
        </form>
        {% endif %}
        {% else %}
        <p>No avatar uploaded yet.</p>
        {% endif %}

        <!-- Upload avatar -->
        {% if request.user.is_authenticated and request.user == user%}
        <form action="{% url 'add_avatar' user.id %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="file" name="avatar-file">
            <input type="submit" value="Upload Avatar">
        </form>
        {% endif %}
        <br>
        <p>{{user.userprofile.bio}} </p>
    </div>
    </div>

</main>
{% endblock %}
 
